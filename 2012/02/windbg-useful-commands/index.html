<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="å‰ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†WinDbgå…¥é—¨ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç»WinDbgå¸¸ç”¨å‘½ä»¤å’Œç”¨æ³•ã€‚
è°ƒè¯•ç¨‹åºçš„CPUæ»¡è½½é—®é¢˜ï¼Œå…³é”®æ˜¯è¦çŸ¥é“ç¨‹åºå½“å‰æ­£åœ¨è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚å‡å¦‚æˆ‘ä»¬åœ¨cpuæ»¡è½½æ—¶åˆ›å»ºäº†ä¸€ä¸ªdumpæ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢å‡ ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç¨‹åºæ­£åœ¨è¿›è¡Œä»€ä¹ˆå¤„ç†ï¼š .time è¿è¡Œ.timeå‘½ä»¤ä¼šæ˜¾ç¤ºæ—¶é—´ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œè¿›ç¨‹è¿è¡Œæ—¶é—´å’ŒCPUèŠ±è´¹åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„æ—¶é—´ã€‚
0:000&amp;gt; .time Debug session time: Tue Oct 23 08:38:35.000 2007 (GMT+1) System Uptime: 4 days 17:48:01.906 Process Uptime: 0 days 0:24:37.000 Kernel time: 0 days 0:04:23.000 User time: 0 days 0:03:28.000  ä½ å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²æ­£å¸¸è¿è¡Œè¶…è¿‡4å¤©ï¼Œè¿›ç¨‹è¿è¡Œäº†24åˆ†é’Ÿï¼ŒCPUåœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ç´¯ç§¯ä½¿ç”¨äº†8åˆ†é’Ÿã€‚æ ¹æ®è¿›ç¨‹æ—¶é—´å’ŒCPUæ—¶é—´èƒ½å¤§æ¦‚ä¼°ç®—å‡ºCPUä½¿ç”¨ç‡å¹³å‡å€¼æ˜¯32.5%ã€‚"><title>WinDbgå¸¸ç”¨å‘½ä»¤</title><link rel=canonical href=//blog.xetri.net/2012/02/windbg-useful-commands/><link rel=stylesheet href=//blog.xetri.net/scss/style.min.877eb08bffd23d4beea6863a88c518e3.css><meta property="og:title" content="WinDbgå¸¸ç”¨å‘½ä»¤"><meta property="og:description" content="å‰ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†WinDbgå…¥é—¨ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç»WinDbgå¸¸ç”¨å‘½ä»¤å’Œç”¨æ³•ã€‚
è°ƒè¯•ç¨‹åºçš„CPUæ»¡è½½é—®é¢˜ï¼Œå…³é”®æ˜¯è¦çŸ¥é“ç¨‹åºå½“å‰æ­£åœ¨è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚å‡å¦‚æˆ‘ä»¬åœ¨cpuæ»¡è½½æ—¶åˆ›å»ºäº†ä¸€ä¸ªdumpæ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢å‡ ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç¨‹åºæ­£åœ¨è¿›è¡Œä»€ä¹ˆå¤„ç†ï¼š .time è¿è¡Œ.timeå‘½ä»¤ä¼šæ˜¾ç¤ºæ—¶é—´ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œè¿›ç¨‹è¿è¡Œæ—¶é—´å’ŒCPUèŠ±è´¹åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„æ—¶é—´ã€‚
0:000&amp;gt; .time Debug session time: Tue Oct 23 08:38:35.000 2007 (GMT+1) System Uptime: 4 days 17:48:01.906 Process Uptime: 0 days 0:24:37.000 Kernel time: 0 days 0:04:23.000 User time: 0 days 0:03:28.000  ä½ å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²æ­£å¸¸è¿è¡Œè¶…è¿‡4å¤©ï¼Œè¿›ç¨‹è¿è¡Œäº†24åˆ†é’Ÿï¼ŒCPUåœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ç´¯ç§¯ä½¿ç”¨äº†8åˆ†é’Ÿã€‚æ ¹æ®è¿›ç¨‹æ—¶é—´å’ŒCPUæ—¶é—´èƒ½å¤§æ¦‚ä¼°ç®—å‡ºCPUä½¿ç”¨ç‡å¹³å‡å€¼æ˜¯32.5%ã€‚"><meta property="og:url" content="//blog.xetri.net/2012/02/windbg-useful-commands/"><meta property="og:site_name" content="cxfksword's notes"><meta property="og:type" content="article"><meta name=twitter:title content="WinDbgå¸¸ç”¨å‘½ä»¤"><meta name=twitter:description content="å‰ä¸€ç¯‡æ–‡ç« ä»‹ç»äº†WinDbgå…¥é—¨ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç»WinDbgå¸¸ç”¨å‘½ä»¤å’Œç”¨æ³•ã€‚
è°ƒè¯•ç¨‹åºçš„CPUæ»¡è½½é—®é¢˜ï¼Œå…³é”®æ˜¯è¦çŸ¥é“ç¨‹åºå½“å‰æ­£åœ¨è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚å‡å¦‚æˆ‘ä»¬åœ¨cpuæ»¡è½½æ—¶åˆ›å»ºäº†ä¸€ä¸ªdumpæ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢å‡ ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç¨‹åºæ­£åœ¨è¿›è¡Œä»€ä¹ˆå¤„ç†ï¼š .time è¿è¡Œ.timeå‘½ä»¤ä¼šæ˜¾ç¤ºæ—¶é—´ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œè¿›ç¨‹è¿è¡Œæ—¶é—´å’ŒCPUèŠ±è´¹åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„æ—¶é—´ã€‚
0:000&amp;gt; .time Debug session time: Tue Oct 23 08:38:35.000 2007 (GMT+1) System Uptime: 4 days 17:48:01.906 Process Uptime: 0 days 0:24:37.000 Kernel time: 0 days 0:04:23.000 User time: 0 days 0:03:28.000  ä½ å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²æ­£å¸¸è¿è¡Œè¶…è¿‡4å¤©ï¼Œè¿›ç¨‹è¿è¡Œäº†24åˆ†é’Ÿï¼ŒCPUåœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ç´¯ç§¯ä½¿ç”¨äº†8åˆ†é’Ÿã€‚æ ¹æ®è¿›ç¨‹æ—¶é—´å’ŒCPUæ—¶é—´èƒ½å¤§æ¦‚ä¼°ç®—å‡ºCPUä½¿ç”¨ç‡å¹³å‡å€¼æ˜¯32.5%ã€‚"><meta property="article:section" content="Post"><meta property="article:tag" content="WinDbg"><meta property="article:published_time" content="2012-02-02T03:33:37+00:00"><meta property="article:modified_time" content="2012-02-02T03:33:37+00:00"><link rel=icon type=image/png href=//blog.xetri.net/img/favicon_hucaec59626a4b072e0484c02c0d7451cf_2387_32x0_resize_box_2.png><style>.article-page article .article-content img{max-width:720px;object-fit:cover;width:100%}.article-summary-more{margin-left:5px;padding:1px 5px;border-radius:5px;border:var(--card-text-color-secondary)solid 1px;color:var(--card-text-color-secondary);font-size:.8em}.article-content code{background-color:rgba(27,31,35,.05);margin:0 2px}</style></head><body><div id=content><div class="container extended flex on-phone--column align-items--flex-start article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=//blog.xetri.net/img/avatar_hub76bbbc8c06c72418eefeedfe902e916_30687_300x300_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸ¥</span></figure><h1 class=site-name><a href=//blog.xetri.net/>cxfksword's notes</a></h1><h2 class=site-description>simple thinking, simple life.</h2></header><nav class=menu id=main-menu><li><a href=//blog.xetri.net/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>é¦–é¡µ</span></a></li><li><a href=//blog.xetri.net/archive/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>å½’æ¡£</span></a></li><li><a href=//blog.xetri.net/projects><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg><span>é¡¹ç›®</span></a></li><li><a href=//blog.xetri.net/abouts><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>å…³äº</span></a></li><li><a href=//blog.xetri.net/index.xml><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-rss" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="5" cy="19" r="1"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg><span>è®¢é˜…</span></a></li></nav></aside><div class="flex column do-not-overflow full-width"><main class=main><div id=article-toolbar><a href=//blog.xetri.net/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=//blog.xetri.net/categories/%E6%8A%80%E6%9C%AF>æŠ€æœ¯</a></header><h2 class=article-title><a href=//blog.xetri.net/2012/02/windbg-useful-commands/>WinDbgå¸¸ç”¨å‘½ä»¤</a></h2><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>2012å¹´02æœˆ02å·</time></footer></div></header><section class=article-content><p><a class=link href=2012/02/intro-to-windbg-for-dotnet-developers/>å‰ä¸€ç¯‡æ–‡ç« </a>ä»‹ç»äº†WinDbgå…¥é—¨ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç»WinDbgå¸¸ç”¨å‘½ä»¤å’Œç”¨æ³•ã€‚</p><p>è°ƒè¯•ç¨‹åºçš„CPUæ»¡è½½é—®é¢˜ï¼Œå…³é”®æ˜¯è¦çŸ¥é“ç¨‹åºå½“å‰æ­£åœ¨è¿›è¡Œä»€ä¹ˆæ“ä½œã€‚å‡å¦‚æˆ‘ä»¬åœ¨cpuæ»¡è½½æ—¶åˆ›å»ºäº†ä¸€ä¸ªdumpæ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢å‡ ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç¨‹åºæ­£åœ¨è¿›è¡Œä»€ä¹ˆå¤„ç†ï¼š
<strong>.time</strong>
è¿è¡Œ.timeå‘½ä»¤ä¼šæ˜¾ç¤ºæ—¶é—´ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ç³»ç»Ÿè¿è¡Œæ—¶é—´ï¼Œè¿›ç¨‹è¿è¡Œæ—¶é—´å’ŒCPUèŠ±è´¹åœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„æ—¶é—´ã€‚</p><pre><code>0:000&gt; .time
Debug session time: Tue Oct 23 08:38:35.000 2007 (GMT+1)
System Uptime: 4 days 17:48:01.906
Process Uptime: 0 days 0:24:37.000
  Kernel time: 0 days 0:04:23.000
  User time: 0 days 0:03:28.000
</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²æ­£å¸¸è¿è¡Œè¶…è¿‡4å¤©ï¼Œè¿›ç¨‹è¿è¡Œäº†24åˆ†é’Ÿï¼ŒCPUåœ¨å†…æ ¸æ€å’Œç”¨æˆ·æ€ç´¯ç§¯ä½¿ç”¨äº†8åˆ†é’Ÿã€‚æ ¹æ®è¿›ç¨‹æ—¶é—´å’ŒCPUæ—¶é—´èƒ½å¤§æ¦‚ä¼°ç®—å‡ºCPUä½¿ç”¨ç‡å¹³å‡å€¼æ˜¯32.5%ã€‚</p><p><strong>!threadpool</strong></p><p>****é€šè¿‡!threadpoolå‘½ä»¤æˆ‘ä»¬èƒ½å‡†ç¡®çŸ¥é“åˆ›å»ºdumpæ—¶cpuçš„ä½¿ç”¨ç‡ã€‚ä¹Ÿèƒ½çŸ¥é“åœ¨é˜Ÿåˆ—ä¸­çš„å¾…å¤„ç†è¯·æ±‚æ•°ï¼ŒCompletion Port(IOCP)çº¿ç¨‹æ•°å’Œå®šæ—¶å™¨timeæ•°ã€‚</p><pre><code>0:000&gt; !threadpool
CPU utilization 100%
Worker Thread: Total: 5 Running: 4 Idle: 1 MaxLimit: 200 MinLimit: 2
Work Request in Queue: 16
Unknown Function: 6a2d945d  Context: 023ede30
Unknown Function: 6a2d945d  Context: 023ee1e8
AsyncTimerCallbackCompletion TimerInfo@11b53760
Unknown Function: 6a2d945d  Context: 023ee3a8
Unknown Function: 6a2d945d  Context: 023e3040
Unknown Function: 6a2d945d  Context: 023ee178
Unknown Function: 6a2d945d  Context: 023edfb0
AsyncTimerCallbackCompletion TimerInfo@11b36428
AsyncTimerCallbackCompletion TimerInfo@11b53868
Unknown Function: 6a2d945d  Context: 023ee060
Unknown Function: 6a2d945d  Context: 023ee290
Unknown Function: 6a2d945d  Context: 023eded0
Unknown Function: 6a2d945d  Context: 023edd88
Unknown Function: 6a2d945d  Context: 023ede98
Unknown Function: 6a2d945d  Context: 023ee258
Unknown Function: 6a2d945d  Context: 023edfe8
--------------------------------------
Number of Timers: 9
--------------------------------------
Completion Port Thread:Total: 3 Free: 3 MaxFree: 4 CurrentLimit: 2 MaxLimit: 200 MinLimit: 2
</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å½“å‰CPUå·²100%ä½¿ç”¨ç‡ï¼Œæˆ‘ä»¬è¿›å…¥ä¸‹ä¸€å‘½ä»¤ã€‚</p><p><strong>!runaway</strong></p><p>è¿™ä¸ªå‘½ä»¤ç”¨äºæ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å’Œå®ƒä»¬çš„CPUä½¿ç”¨ç‡ã€‚è¿™ä¸ªå‘½ä»¤å¯¹äºæŸ¥æ‰¾é«˜CPUä½¿ç”¨ç‡é—®é¢˜å¾ˆæœ‰å¸®åŠ©ï¼</p><pre><code>0:000&gt; !runaway
User Mode Time
  Thread       Time
  25:1a94      0 days 0:00:39.937
  16:1bc0      0 days 0:00:38.390
  50:1e8c      0 days 0:00:08.859
  52:1e40      0 days 0:00:08.687
  20:1c2c      0 days 0:00:08.234
  51:1340      0 days 0:00:08.171
  21:1bcc      0 days 0:00:06.953
  26:13ec      0 days 0:00:06.671
  44:131c      0 days 0:00:03.906
  22:d8c       0 days 0:00:03.375
  33:78c       0 days 0:00:02.656
  34:1a8c      0 days 0:00:00.906
  29:1f5c      0 days 0:00:00.828
   6:e28       0 days 0:00:00.625
   5:1c78      0 days 0:00:00.546
  23:14a4      0 days 0:00:00.484
   4:5ac       0 days 0:00:00.437
  45:5dc       0 days 0:00:00.421
   3:13b4      0 days 0:00:00.421
  47:19c8      0 days 0:00:00.375
  28:1b6c      0 days 0:00:00.250
  46:1dac      0 days 0:00:00.156
   7:1dd8      0 days 0:00:00.109
  48:cdc       0 days 0:00:00.093
  49:1eac      0 days 0:00:00.062
  15:1a64      0 days 0:00:00.062
   0:1804      0 days 0:00:00.046
  36:4a4       0 days 0:00:00.031
  11:1eb4      0 days 0:00:00.031
   1:10b4      0 days 0:00:00.031
  31:16ac      0 days 0:00:00.015
  14:4ac       0 days 0:00:00.015
   2:186c      0 days 0:00:00.015
  59:590       0 days 0:00:00.000
  58:294       0 days 0:00:00.000
  57:16d0      0 days 0:00:00.000
  56:1578      0 days 0:00:00.000
  55:1428      0 days 0:00:00.000
  54:16d8      0 days 0:00:00.000
  53:fd8       0 days 0:00:00.000
  43:1b8c      0 days 0:00:00.000
  42:1c24      0 days 0:00:00.000
  41:1e2c      0 days 0:00:00.000
  40:11b0      0 days 0:00:00.000
  39:edc       0 days 0:00:00.000
  38:1a08      0 days 0:00:00.000
  37:171c      0 days 0:00:00.000
  35:1254      0 days 0:00:00.000
  32:1f9c      0 days 0:00:00.000
  30:1ae8      0 days 0:00:00.000
  27:190c      0 days 0:00:00.000
  24:1d2c      0 days 0:00:00.000
  19:1e38      0 days 0:00:00.000
  18:ee4       0 days 0:00:00.000
  17:fb8       0 days 0:00:00.000
  13:1b54      0 days 0:00:00.000
  12:1a48      0 days 0:00:00.000
  10:f64       0 days 0:00:00.000
   9:1024      0 days 0:00:00.000
   8:1b78      0 days 0:00:00.000
</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°è¿è¡Œçº¿ç¨‹çš„æ€»æ—¶é—´å’Œä½¿ç”¨.timeå‘½ä»¤çœ‹åˆ°çš„æ€»cpuä½¿ç”¨æ—¶é—´å¹¶ä¸ç›¸ç­‰ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸ºçº¿ç¨‹è¢«é‡å¤ä½¿ç”¨æˆ–å›æ”¶äº†ã€‚è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªçº¿ç¨‹çš„CPUä½¿ç”¨æ—¶é—´å¯èƒ½æ˜¯å¤„ç†å¤šä¸ªè¯·æ±‚çš„ç»“æœã€‚</p><p><strong>!threads</strong></p><p>!threadsæ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„æ‰˜ç®¡çº¿ç¨‹ä¿¡æ¯ã€‚è¾“å‡ºå¦‚ä¸‹ï¼š</p><pre><code>0:000&gt; !threads
ThreadCount: 48
UnstartedThread: 0
BackgroundThread: 29
PendingThread: 0
DeadThread: 19
Hosted Runtime: no
                                      PreEmptive   GC Alloc           Lock
  ID    OSID ThreadOBJ    State     GC       Context         Domain   Count APT Exception
  16    1 1bc0 001fccd0   1808220 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  22    2  d8c 002016f0      b220 Enabled  00000000:00000000 0019daf0     0 MTA (Finalizer)
  14    4  4ac 00242e58   880a220 Enabled  00000000:00000000 0019daf0     0 MTA (Threadpool Completion Port)
  23    5 14a4 11b39f18    80a220 Enabled  00000000:00000000 0019daf0     0 MTA (Threadpool Completion Port)
  24    6 1d2c 11b41ad8      1220 Enabled  00000000:00000000 0019daf0     0 Ukn
  25    7 1a94 11b46c70   180b220 Enabled  27240c98:27241fd8 11b42540     1 MTA (Threadpool Worker)
  26    9 13ec 12ce2888   200b220 Enabled  2a9f1434:2a9f33c0 11b42540     0 MTA
  27    a 190c 12d85eb8   200b220 Enabled  00000000:00000000 11b42540     0 MTA
  29    b 1f5c 13df6a50   200b220 Enabled  2ab1da6c:2ab1f1c0 11b42540     0 MTA
  30    c 1ae8 12d44a58      b220 Enabled  00000000:00000000 11b42540     0 MTA
  31    d 16ac 12e2e008   200b220 Enabled  2a81348c:2a8153c0 11b42540     1 MTA
   5    e 1c78 12da2160       220 Enabled  00000000:00000000 0019daf0     0 Ukn
  33    8  78c 11b674c8   200b220 Enabled  2707b818:2707c1d8 11b42540     0 MTA
  34   12 1a8c 13f163c8       220 Enabled  00000000:00000000 0019daf0     0 Ukn
  36   13  4a4 13eef718   200b220 Enabled  2a7db4a4:2a7dd3c0 11b42540     0 MTA
   4   14  5ac 13ef2008       220 Enabled  00000000:00000000 0019daf0     0 Ukn
  42   10 1c24 13f0e950   880b220 Enabled  00000000:00000000 0019daf0     0 MTA (Threadpool Completion Port)
   6   11  e28 13f16008       220 Enabled  00000000:00000000 0019daf0     0 Ukn
   3    f 13b4 13eba008       220 Enabled  00000000:00000000 0019daf0     0 Ukn
  43   15 1b8c 140db008   880b220 Enabled  00000000:00000000 0019daf0     0 MTA (Threadpool Completion Port)
  44   17 131c 140ceb28   200b220 Enabled  272288c8:27229fd8 11b42540     0 MTA
  45   1d  5dc 140cd0a0       220 Enabled  00000000:00000000 0019daf0     0 Ukn
  47   20 19c8 1651a008       220 Enabled  00000000:00000000 0019daf0     0 Ukn
XXXX   24    0 16468880   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  46   1f 1dac 1650ab48       220 Enabled  00000000:00000000 0019daf0     0 Ukn
XXXX   1a    0 140d5008   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   16    0 140c5008   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  50    3 1e8c 14064420   180b220 Enabled  27246f54:27247fd8 11b42540     1 MTA (Threadpool Worker)
XXXX   35    0 1406e800   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  51   36 1340 140df008   180b220 Enabled  2adec9cc:2aded1c0 11b42540     1 MTA (Threadpool Worker)
XXXX   37    0 16566868   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  48   38  cdc 16578840       220 Enabled  00000000:00000000 0019daf0     0 Ukn
XXXX   39    0 16566c28   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   3b    0 1646b8b0   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   3c    0 16674008   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   3d    0 16676418   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   3e    0 16676fb8   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   3f    0 16674d48   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   40    0 1667de10   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   41    0 16680050   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   42    0 166812e8   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   43    0 16683e60   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  52   44 1e40 165259e8   180b220 Enabled  2adf126c:2adf31c0 11b42540     1 MTA (Threadpool Worker)
XXXX   45    0 165b7c08   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   46    0 165aa3d8   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   47    0 165242c8   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
XXXX   48    0 165e9500   1801820 Enabled  00000000:00000000 0019daf0     0 Ukn (Threadpool Worker)
  49   3a 1eac 165676f0       220 Enabled  00000000:00000000 0019daf0     0 Ukn
</code></pre><p>çº¿ç¨‹IDä¸ºXXXXè¡¨ç¤ºè¯¥çº¿ç¨‹å·²ç»“æŸï¼Œå¹¶åœ¨ç­‰å¾…å›æ”¶ã€‚æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°çº¿ç¨‹IDä¸º22çš„çº¿ç¨‹æ­£åœ¨ç»ˆç»“(finalizer)ã€‚å‡å¦‚æˆ‘ä»¬ä½¿ç”¨!runawayå‘½ä»¤æ—¶çœ‹åˆ°22çº¿ç¨‹æœ‰å¤§é‡çš„cpuæ´»åŠ¨ï¼Œå¯èƒ½æˆ‘ä»¬çš„ç¨‹åºæœ‰ç»ˆç»“(finalizer)é—®é¢˜ã€‚</p><p><strong>åˆ‡æ¢åˆ°æŒ‡å®šçº¿ç¨‹</strong></p><p>è¦åˆ‡æ¢åˆ°æŒ‡å®šçš„çº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ ¼å¼å‘½ä»¤ï¼š~[thread id]sï¼Œå‡å¦‚æˆ‘ä»¬è¦åˆ‡æ¢åˆ°50çº¿ç¨‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>0:000&gt; ~50s
</code></pre><p>ç°åœ¨æˆ‘ä»¬å·²åˆ‡æ¢åˆ°çº¿ç¨‹50ï¼Œå¯ä»¥ä½¿ç”¨å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„å‘½ä»¤ã€‚</p><p><strong>!clrstack</strong>
!clrstackæ˜¾ç¤ºå½“å‰çº¿ç¨‹çš„å †æ ˆä¿¡æ¯ï¼Œé€šè¿‡æŒ‡å®šâ€œ-pâ€å‚æ•°ï¼Œè¿˜èƒ½çœ‹åˆ°æ–¹æ³•è°ƒç”¨çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ä¿¡æ¯ã€‚
ä¸‹é¢æ˜¯çº¿ç¨‹50çš„å †æ ˆä¿¡æ¯ï¼š</p><pre><code>0:050&gt; !clrstack
OS Thread Id: 0x1e8c (50)
ESP       EIP
17a9e750 7d61c828 [NDirectMethodFrameSlim: 17a9e750] System.DirectoryServices.Protocols.Wldap32.ldap_bind_s(IntPtr, System.String, System.DirectoryServices.Protocols.SEC_WINNT_AUTH_IDENTITY_EX, System.DirectoryServices.Protocols.BindMethod)
17a9e768 14df70f9 System.DirectoryServices.Protocols.LdapConnection.BindHelper(System.Net.NetworkCredential, Boolean)
17a9e794 14df6de0 System.DirectoryServices.Protocols.LdapConnection.Bind()
17a9e79c 14df59e9 System.DirectoryServices.Protocols.LdapConnection.SendRequestHelper(System.DirectoryServices.Protocols.DirectoryRequest, Int32 ByRef)
17a9e8b8 14df56e8 System.DirectoryServices.Protocols.LdapConnection.SendRequest(System.DirectoryServices.Protocols.DirectoryRequest, System.TimeSpan)
17a9e8bc 14df5657 [InlinedCallFrame: 17a9e8bc]
</code></pre><p>ä»ä¸‹å‘ä¸Šçœ‹ï¼Œæˆ‘ä»¬èƒ½çŸ¥é“LdapConnectionè°ƒç”¨äº†SendRequestæ–¹æ³•ï¼Œè€ŒSendRequeståˆè°ƒç”¨äº†SendRequestHelperæ–¹æ³•ç­‰ç­‰ã€‚
å¦‚æœæˆ‘ä»¬æ‰§è¡Œâ€œ!clrstack -pâ€å‘½ä»¤ï¼Œæˆ‘ä»¬å¾—åˆ°ä¿¡æ¯ï¼š</p><pre><code>0:050&gt; !clrstack -p
OS Thread Id: 0x1e8c (50)
ESP       EIP
17a9e750 7d61c828 [NDirectMethodFrameSlim: 17a9e750] System.DirectoryServices.Protocols.Wldap32.ldap_bind_s(IntPtr, System.String, System.DirectoryServices.Protocols.SEC_WINNT_AUTH_IDENTITY_EX, System.DirectoryServices.Protocols.BindMethod)
17a9e768 14df70f9 System.DirectoryServices.Protocols.LdapConnection.BindHelper(System.Net.NetworkCredential, Boolean)
    PARAMETERS:
        this = 0x271fdfe0
        newCredential =
        needSetCredential =

17a9e794 14df6de0 System.DirectoryServices.Protocols.LdapConnection.Bind()
    PARAMETERS:
        this =

17a9e79c 14df59e9 System.DirectoryServices.Protocols.LdapConnection.SendRequestHelper(System.DirectoryServices.Protocols.DirectoryRequest, Int32 ByRef)
    PARAMETERS:
        this = 0x271fdfe0
        request = 0x27246e38
        messageID = 0x17a9e8ec

17a9e8b8 14df56e8 System.DirectoryServices.Protocols.LdapConnection.SendRequest(System.DirectoryServices.Protocols.DirectoryRequest, System.TimeSpan)
    PARAMETERS:
        this = 0x271fdfe0
        request = 0x27246e38
        requestTimeout =

17a9e8bc 14df5657 [InlinedCallFrame: 17a9e8bc]
</code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°DirectoryRequestå‚æ•°ä¼ é€’ç»™äº†SendRequestå’ŒSendRequestHelperï¼Œè¦æŸ¥çœ‹DirectoryRequestçš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ‘ä»¬åªéœ€å¤åˆ¶å®ƒçš„åœ°å€ï¼ˆ0x27246e38ï¼‰ï¼Œå¹¶åœ¨ä¸‹ä¸ªå‘½ä»¤ä¸­ä½¿ç”¨ã€‚</p><p><strong>!dumpobject (!do)</strong>
è¿™æ˜¯å¦å¤–ä¸€ä¸ªé‡è¦çš„å‘½ä»¤ã€‚Dumpobjectä¼šæ‰“å°å‡ºæŒ‡å®šåœ°å€çš„å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ã€‚æˆ‘ä»¬ä½¿ç”¨åˆšæ‰çš„åœ°å€è¯•ä¸‹:</p><pre><code>0:050&gt; !do 0x27246e38
Name: System.DirectoryServices.Protocols.SearchRequest
MethodTable: 14b394c4
EEClass: 14d97ce0
Size: 52(0x34) bytes
GC Generation: 0
(C:\WINDOWS\assembly\GAC_MSIL\System.DirectoryServices.Protocols\2.0.0.0__b03f5f7f11d50a3a\System.DirectoryServices.Protocols.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
02c39310  4000102        4        System.String  0 instance 00000000 directoryRequestID
14b398bc  4000103        8 ...ControlCollection  0 instance 27246e90 directoryControlCollection
02c39310  4000111        c        System.String  0 instance 27246d00 dn
12579f5c  4000112       10 ....StringCollection  0 instance 27246eb4 directoryAttributes
02c36ca0  4000113       14        System.Object  0 instance 27246ddc directoryFilter
14b39344  4000114       18         System.Int32  1 instance        1 directoryScope
14b393fc  4000115       1c         System.Int32  1 instance        0 directoryRefAlias
0fd3da00  4000116       20         System.Int32  1 instance        0 directorySizeLimit
1202af88  4000117       28      System.TimeSpan  1 instance 27246e60 directoryTimeLimit
120261c8  4000118       24       System.Boolean  1 instance        0 directoryTypesOnly
</code></pre><p>é€šè¿‡æ‰“å°çš„ä¿¡æ¯ï¼Œå¯ä»¥çŸ¥é“å®ƒæ˜¯System.DirectoryServices.Protocols.SearchRequestçš„ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¾ç¤ºçš„éƒ½æ˜¯ System.DirectoryServices.Protocols.SearchRequestçš„å±æ€§å€¼ã€‚è¦çŸ¥é“SearchRequestç±»çš„ç›¸å…³å±æ€§ä¿¡æ¯ï¼Œå¯ä»¥<a class=link href=http://msdn2.microsoft.com/en-us/library/system.directoryservices.protocols.searchrequest_properties.aspx target=_blank rel=noopener>æŸ¥çœ‹MSDN</a>ã€‚å½“å‰æˆ‘ä»¬å·²æœ‰RequestId, Scopeå’ŒDistinguishedNameç­‰ç­‰ã€‚
æ‰€ä»¥ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³çŸ¥é“SearchRequestå¯¹è±¡çš„DistinguishedNameå±æ€§å€¼ï¼Œå³æ˜¯ä¸Šé¢åˆ—è¡¨ä¸­çš„dnï¼Œæˆ‘ä»¬åªéœ€å†å¤åˆ¶å®ƒçš„åœ°å€ï¼ˆ27246d00ï¼‰ï¼Œå¹¶å†æ¬¡ä½¿ç”¨!dumpobjectå‘½ä»¤ã€‚å› ä¸ºDistinguishedNameæ˜¯System.Stringç±»å‹ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœå¾ˆæ˜æ˜¾ï¼š</p><pre><code>0:050&gt; !do 27246d00
Name: System.String
MethodTable: 02c39310
EEClass: 0fb610ac
Size: 112(0x70) bytes
GC Generation: 0
(C:\WINDOWS\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll)
String: CN=Dummy,CN=Accounts,CN=useradm,DC=dummy,DC=net
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
0fd3da00  4000096        4         System.Int32  1 instance       48 m_arrayLength
0fd3da00  4000097        8         System.Int32  1 instance       47 m_stringLength
0fb80010  4000098        c          System.Char  1 instance       43 m_firstChar
02c39310  4000099       10        System.String  0   shared   static Empty
    &gt;&gt; Domain:Value  0019daf0:03380310 11b42540:03380310 &lt;&lt; 0fb86d44  400009a       14        System.Char[]  0   shared   static WhitespaceChars     &gt;&gt; Domain:Value  0019daf0:03380324 11b42540:033855bc &lt;&lt;
</code></pre><p>é€šè¿‡è¾“å‡ºçš„ä¿¡æ¯æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“DistinguishedNameå±æ€§çš„å€¼æ˜¯â€œCN=Dummy,CN=Accounts,CN=useradm,DC=dummy,DC=netâ€ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŸ¥çœ‹æ›´å¤šå†…å®¹ï¼Œåªéœ€ç»§ç»­ä½¿ç”¨!dumpobjectå‘½ä»¤å³å¯ã€‚</p><p><strong>!dumpstackobjects (!dso)</strong>
ä½¿ç”¨è¯¥å‘½ä»¤æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰çº¿ç¨‹çš„å †æ ˆå¼•ç”¨çš„æ‰€æœ‰æ‰˜ç®¡å¯¹è±¡ã€‚æ‰“å°ä¿¡æ¯å¦‚ä¸‹ï¼š</p><pre><code>0:050&gt; !dso
OS Thread Id: 0x1e8c (50)
ESP/REG  Object   Name
17a9e534 0741f860 System.RuntimeType
17a9e6b8 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e6bc 27246f20 System.DirectoryServices.Protocols.SEC_WINNT_AUTH_IDENTITY_EX
17a9e740 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e744 27246f20 System.DirectoryServices.Protocols.SEC_WINNT_AUTH_IDENTITY_EX
17a9e764 27246f20 System.DirectoryServices.Protocols.SEC_WINNT_AUTH_IDENTITY_EX
17a9e768 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e780 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e784 27246e38 System.DirectoryServices.Protocols.SearchRequest
17a9e794 271fdf14 System.DirectoryServices.Protocols.LdapDirectoryIdentifier
17a9e7a8 27246ef8 System.Collections.ArrayList
17a9e7bc 27246ef8 System.Collections.ArrayList
17a9e7c8 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e8a4 27246e38 System.DirectoryServices.Protocols.SearchRequest
17a9e8d0 27246ed8 System.Object[]    (System.Object[])
17a9e8e0 073ff6b8 System.String    cn
17a9e8e4 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e8f4 27246d00 System.String    CN=Dummy,CN=Accounts,CN=useradm,DC=Dummy,DC=net
17a9e8f8 271fdfe0 System.DirectoryServices.Protocols.LdapConnection
17a9e8fc 27246e38 System.DirectoryServices.Protocols.SearchRequest
17a9e910 03380310 System.String
17a9e914 27246e24 System.Object[]    (System.String[])
17a9e918 272399a8 System.String    CN=OID-Dummy-ABC123,CN=Dummy,CN=Accounts,CN=useradm,DC=Dummy,DC=net
17a9e91c 27246ddc System.String    (CN=OID-Dummy-ABC123)
...etc...
</code></pre><p>è¿™ä¸ªå‘½ä»¤å¯¹äºæŸ¥æ‰¾å½“å‰çº¿ç¨‹å¼•ç”¨äº†é‚£äº›å¯¹è±¡å¾ˆæœ‰ç”¨ã€‚å‡å¦‚ä½ æƒ³æŸ¥çœ‹æŸä¸€å¯¹è±¡ï¼Œåªéœ€å¤åˆ¶[Object]å­—æ®µçš„åœ°å€ï¼Œå¹¶ä½¿ç”¨ !dumpobjectå‘½ä»¤ï¼š</p><pre><code>0:050&gt; !do 271fdfe0
Name: System.DirectoryServices.Protocols.LdapConnection
MethodTable: 14a2040c
EEClass: 149daf08
Size: 56(0x38) bytes
(C:\WINDOWS\assembly\GAC_MSIL\System.DirectoryServices.Protocols\2.0.0.0__b03f5f7f11d50a3a\System.DirectoryServices.Protocols.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
14a2078c  40000c3        4 ...NetworkCredential  0 instance 00000000 directoryCredential
14a2144c  40000c4        8 ...ificateCollection  0 instance 271fe018 certificatesCollection
1202af88  40000c5       10      System.TimeSpan  1 instance 271fdff0 connectionTimeOut
1466fe50  40000c6        c ...rectoryIdentifier  0 instance 271fdf14 directoryIdentifier
14a2034c  4000236       24         System.Int32  0 instance        2 connectionAuthType
14a223a4  4000237       18 ...dapSessionOptions  0 instance 271fe2d8 options
0fb896d8  4000238       28        System.IntPtr  0 instance 564180944 ldapHandle
120261c8  4000239       2c       System.Boolean  0 instance        0 disposed
120261c8  400023a       2d       System.Boolean  0 instance        0 bounded
120261c8  400023b       2e       System.Boolean  0 instance        0 needRebind
14a22084  400023e       1c ...pResponseCallback  0 instance 271fe03c fd
120261c8  4000243       2f       System.Boolean  0 instance        0 setFQDNDone
120261c8  4000244       30       System.Boolean  0 instance        1 automaticBind
120261c8  4000245       31       System.Boolean  0 instance        1 needDispose
120261c8  4000246       32       System.Boolean  0 instance        1 connected
14a2267c  4000247       20 ...s.QUERYCLIENTCERT  0 instance 271fe394 clientCertificateRoutine
0fd314bc  400023c       20 ...ections.Hashtable  0   shared   static handleTable
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe504 &lt; &lt;
02c36ca0  400023d       24        System.Object  0   shared   static objectLock
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe53c &lt; &lt;
0fd314bc  400023f       28 ...ections.Hashtable  0   shared   static asyncResultTable
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe610 &lt; &lt;
14a21864  4000240       2c ...lResultsProcessor  0   shared   static partialResultsProcessor
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe678 &lt; &lt;
12305e94  4000241       30 ....ManualResetEvent  0   shared   static waitHandle
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe64c &lt; &lt;
14a21954  4000242       34 ...lResultsRetriever  0   shared   static retriever
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:073fe6a8 &lt; &lt;
</code></pre><p><strong>!dumparray (!da)</strong>
ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æœ‰å¾ˆå¤šå¯¹è±¡æ•°ç»„åœ¨å †æ ˆä¸­ï¼Œåœ¨ä¸Šé¢çš„åˆ—è¡¨ä¸­æŸ¥æ‰¾System.Object[]ç±»å‹å°±èƒ½æ‰¾åˆ°ã€‚å¦‚æœä½ å¯¹å¯¹è±¡æ•°ç»„ä½¿ç”¨ !dumpobjectå‘½ä»¤ï¼Œä½ åªèƒ½çœ‹åˆ°æ•°ç»„ä¿¡æ¯ï¼Œè€Œä¸èƒ½çœ‹åˆ°æ•°ç»„çš„å†…å®¹ä¿¡æ¯ï¼Œè¦çœ‹åˆ°æ•°ç»„å†…å®¹ä¿¡æ¯ï¼Œå°±éœ€è¦ä½¿ç”¨!dumparrayå‘½ä»¤ï¼Œæˆ–ç®€ç§°!da:</p><pre><code>0:050&gt; !do 27239b98
Name: System.Object[]
MethodTable: 02c3896c
EEClass: 02c388ec
Size: 24(0x18) bytes
Array: Rank 1, Number of elements 2, Type CLASS
Element Type: System.String
Fields:
None

0:050&gt; !da 27239b98
Name: System.String[]
MethodTable: 02c3896c
EEClass: 02c388ec
Size: 24(0x18) bytes
Array: Rank 1, Number of elements 2, Type CLASS
Element Methodtable: 02c39310
[0] 272399a8
[1] 27239a44
</code></pre><p>é€šè¿‡!dumparrayå‘½ä»¤æˆ‘ä»¬èƒ½çŸ¥é“è¯¥æ•°ç»„å¯¹è±¡æ˜¯å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¹¶ç»™å‡ºäº†æ•°ç»„é¡¹çš„åœ°å€ã€‚å†ä½¿ç”¨!dumpobjectå‘½ä»¤æˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ•°ç»„é¡¹çš„å…·ä½“å†…å®¹ã€‚</p><p><strong>!objsize</strong>
å¦‚æœä½ æŸ¥çœ‹ä¸Šé¢æ‰“å°çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°å¯¹è±¡çš„å¤§å°æ˜¯24å­—èŠ‚ã€‚ä»æŸæ–¹é¢æ¥è¯´ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œ24å­—èŠ‚æ˜¯System.Object[]æ•°ç»„å¯¹è±¡æœ¬èº«å¤§å°ï¼Œä½†å¹¶ä¸åŒ…æ‹¬æ•°ç»„å†…å®¹çš„å¤§å°!è¦è·å¾—æ•´ä¸ªå¯¹è±¡çš„å¤§å°ï¼Œå°±è¦ä½¿ç”¨åˆ° !objsizeå‘½ä»¤:</p><pre><code>0:050&gt; !objsize 27239b98
sizeof(27239b98) =Â Â Â Â Â Â Â Â Â  348 (Â Â Â Â Â Â  0x15c) bytes (System.Object[])
</code></pre><p>!objsizeä¼šéå†å¯¹è±¡å¼•ç”¨çš„æ‰€æœ‰å­å¯¹è±¡ï¼Œå¹¶è®¡ç®—å‡ºæ€»çš„å¤§å°ã€‚å¦‚ä¸Šé¢æ•°ç»„å¯¹è±¡å’Œå®ƒçš„å†…å®¹çš„æ€»å¤§å°æ˜¯348å­—èŠ‚ã€‚
å¦‚æœå¯¹è±¡æœ‰å¼•ç”¨å¾ˆå¤šå­å¯¹è±¡ï¼Œé‚£ä¹ˆ!objsizeä¼šèŠ±è´¹è¾ƒå¤šçš„æ—¶é—´è®¡ç®—å‡ºæ€»å¤§å°ã€‚</p><p><strong>!dumpheap</strong>
è¿™æ˜¯å¦ä¸€ä¸ªè¾ƒé¢‘ç¹ä½¿ç”¨çš„å‘½ä»¤ã€‚!dumpheapä¼šæ‰“å°å‡ºæ‰€æœ‰åœ¨æ‰˜ç®¡å †ä¸­çš„å¯¹è±¡ä¿¡æ¯ã€‚ç›´æ¥æ‰§è¡Œè¯¥å‘½ä»¤ä¼šæ‰“å°å‡ºå¤§é‡çš„ä¿¡æ¯ï¼Œæ‰€ä»¥ä¸€èˆ¬ä½¿ç”¨æ—¶éƒ½è‡³å°‘å¸¦ä¸Šä¸€ä¸ªå‚æ•°ã€‚åŠ ä¸Š-statå‚æ•°åä¼šè¾“å‡ºæ€»ç»“åçš„ä¿¡æ¯ï¼Œå¦‚ä¸‹é¢æ˜¯æˆªå–çš„æ˜¯!dumpheap -statå‘½ä»¤è¾“å‡ºçš„ä¸€éƒ¨åˆ†:</p><pre><code>0:050&gt; !dumpheap -stat
------------------------------
Heap 0
total 2754508 objects
------------------------------
Heap 1
total 2761329 objects
------------------------------
total 5515837 objects
Statistics:
Â Â Â Â Â  MTÂ Â Â  CountÂ Â Â  TotalSize Class Name
16e0a6d8Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Collections.Generic.ObjectEqualityComparer`1[[System.Data.ProviderBase.DbConnectionInternal, System.Data]]
16d9cd9cÂ Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Xml.Serialization.Configuration.DateTimeSerializationSection+DateTimeSerializationMode
16d9bf30Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Diagnostics.OrdinalCaseInsensitiveComparer
16d9112cÂ Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Xml.Serialization.NameTable
16d7f664Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Xml.Serialization.TempAssemblyCache
163ea85cÂ Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Data.Res
1501e4c4Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Collections.Generic.ObjectEqualityComparer`1[[System.Web.UI.Control, System.Web]]
14efb138Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.TimeoutValidator
14ef9964Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.Cache.HttpRequestCacheLevel
14ef77a8Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 Microsoft.Win32.WinInetCache
14ef68e4Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.WebRequest+WebProxyWrapper
14ef658cÂ Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.Configuration.ProxyElement+BypassOnLocalValues
14ef63d8Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.Configuration.ProxyElement+AutoDetectValues
14ef5b68Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.CaseInsensitiveAscii
14ef5610Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.HeaderInfoTable
14ef4718Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Net.HttpRequestCreator
14db6710Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Web.Configuration.MachineKeyValidationConverter
14db3140Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Collections.Generic.ObjectEqualityComparer`1[[System.Runtime.Serialization.MemberHolder, mscorlib]]
14b3f4d8Â Â Â Â Â Â Â  1Â Â Â Â Â Â Â Â Â Â  12 System.Web.UI.SupportsEventValidationAttribute
...etc...
14a276a8Â Â Â  19578Â Â Â Â Â Â  704808 System.DirectoryServices.Interop.AdsValueHelper
14a2ea24Â Â Â Â  9196Â Â Â Â Â Â  735680 System.Web.UI.WebControls.Label
14a2e51cÂ Â Â  16862Â Â Â Â Â Â  741928 System.Web.UI.WebControls.Style
125778ecÂ Â Â  48015Â Â Â Â Â Â  768240 System.Collections.Specialized.NameObjectCollectionBase+NameObjectEntry
120261c8Â Â Â  65842Â Â Â Â Â Â  790104 System.Boolean
14a2ee7cÂ Â Â Â  9198Â Â Â Â Â Â  809424 System.Web.UI.WebControls.Table
14b311c4Â Â Â Â  9647Â Â Â Â Â Â  810348 System.Web.UI.WebControls.Image
13a2b7dcÂ Â Â  34913Â Â Â Â Â Â  837912 System.Web.HttpServerVarsCollectionEntry
14b303a4Â Â Â  10605Â Â Â Â Â Â  848400 System.Web.UI.WebControls.HyperLink
14d8e3d4Â Â Â  77748Â Â Â Â Â Â  932976 Microsoft.Web.UI.WebControls.BaseChildNodeCollection+ActionType
14db90acÂ Â Â  81372Â Â Â Â Â Â  976464 System.Web.UI.WebControls.FontInfo
14b30694Â Â Â  28648Â Â Â Â Â  1031328 System.Web.UI.WebControls.TableRow+CellControlCollection
14d8fdbcÂ Â Â  38912Â Â Â Â Â  1089536 Microsoft.Web.UI.WebControls.TreeNodeCollection
14b3d0bcÂ Â Â  86592Â Â Â Â Â  1385472 System.Web.UI.Pair
1466c5c4Â Â Â  39305Â Â Â Â Â  1414980 System.Web.UI.ControlCollection
14d8e48cÂ Â Â  77748Â Â Â Â Â  1865952 Microsoft.Web.UI.WebControls.BaseChildNodeCollection+Action
1545061cÂ Â Â  38874Â Â Â Â Â  2176944 Microsoft.Web.UI.WebControls.TreeNode
14b30eecÂ Â Â  52668Â Â Â Â Â  2317392 System.Web.UI.WebControls.TableItemStyle
14a2f804Â Â Â  28515Â Â Â Â Â  2395260 System.Web.UI.WebControls.TableRow
14a2be6cÂ Â Â  40894Â Â Â Â Â  2453640 System.Web.UI.LiteralControl
0fd3da00Â Â  228792Â Â Â Â Â  2745504 System.Int32
14b3e3acÂ Â  244793Â Â Â Â Â  2937516 System.Web.UI.IndexedString
14a2de94Â Â  198580Â Â Â Â Â  3177280 System.Web.UI.StateBag
1466c454Â Â Â  80512Â Â Â Â Â  3542528 System.Web.UI.Control+OccasionalFields
12302c2cÂ Â  205849Â Â Â Â Â  4116980 System.Collections.Specialized.HybridDictionary
14b30024Â Â Â  52934Â Â Â Â Â  4446456 System.Web.UI.WebControls.TableCell
12302f2cÂ Â  178294Â Â Â Â Â  4992232 System.Collections.Specialized.ListDictionary
14a2e284Â Â  412762Â Â Â Â Â  6604192 System.Web.UI.StateItem
14d8ce64Â Â  117078Â Â Â Â Â  7024680 Microsoft.Web.UI.WebControls.CssCollection
0fd314bcÂ Â  132065Â Â Â Â Â  7395640 System.Collections.Hashtable
1230319cÂ Â  422580Â Â Â Â Â  8451600 System.Collections.Specialized.ListDictionary+DictionaryNode
1202a58cÂ Â  380438Â Â Â Â Â  9130512 System.Collections.ArrayList
0fd32050Â Â  133000Â Â Â Â  22582944 System.Collections.Hashtable+bucket[]
02c3896cÂ Â  649842Â Â Â Â  23275900 System.Object[]
0fd3c12cÂ Â Â Â  3471Â Â Â Â  36385536 System.Byte[]
001fee20Â Â Â Â Â  338Â Â Â Â  65409920Â Â Â Â Â  Free
02c39310Â Â  683083Â Â Â  161821000 System.String
Total 5515837 objects
Fragmented blocks larger than 0.5 MB:
Â Â Â  AddrÂ Â Â Â  SizeÂ Â Â Â Â  Followed by
2adf31ccÂ Â Â  2.0MBÂ Â Â Â Â Â Â Â  2aff85d8 System.String
2b006a2cÂ Â  20.3MBÂ Â Â Â Â Â Â Â  2c4530d8 System.Net.SocketAddress
</code></pre><p>è¾“å‡ºä¿¡æ¯æŒ‰å¯¹è±¡ç±»å‹çš„æ€»å¤§å°å‡åºæ’åºï¼Œä½ ä¸€èˆ¬å¯ä»¥åœ¨åˆ—è¡¨çš„æœ€ä¸‹é¢æ‰¾åˆ°stringå¯¹è±¡çš„å¤§å°ï¼Œå› ä¸ºå­—ç¬¦ä¸²åœ¨ç¨‹åºä¸­ä¸€èˆ¬æ˜¯æœ€å¸¸ç”¨çš„ã€‚
å…¶ä»–æ¯”è¾ƒæœ‰ç”¨çš„å‚æ•°æ˜¯-typeå’Œ-mtï¼ˆMethodTableçš„æ„æ€ï¼‰ã€‚ä½¿ç”¨å®ƒä»¬ä½ å¯ä»¥æŸ¥çœ‹æŒ‡å®šå¯¹è±¡ç±»å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å‡å¦‚æˆ‘ä»¬æƒ³æŸ¥çœ‹System.Net.HttpRequestCreatorç±»å‹çš„å…·ä½“ä¿¡æ¯ï¼Œå¯ä»¥å¤åˆ¶ä¸Šé¢åˆ—è¡¨ä¸­å®ƒçš„MTå­—æ®µåœ°å€ï¼ˆ14ef4718ï¼‰ï¼Œç„¶åä½¿ç”¨ !dumpheap -mtå‘½ä»¤ï¼š</p><pre><code>0:050&gt; !dumpheap -mt 14ef4718
------------------------------
Heap 0
Address       MT     Size
0342ccf8 14ef4718       12
total 1 objects
------------------------------
Heap 1
Address       MT     Size
total 0 objects
------------------------------
total 1 objects
Statistics:
      MT    Count    TotalSize Class Name
14ef4718        1           12 System.Net.HttpRequestCreator
</code></pre><p>ä¸Šé¢åˆ—å‡ºäº†æ‰€æœ‰System.Net.HttpRequestCreatorç±»å‹çš„å¯¹è±¡çš„åœ°å€ï¼Œå‡å¦‚æˆ‘ä»¬æƒ³æŸ¥çœ‹æŒ‡å®šå¯¹è±¡çš„ä¿¡æ¯ï¼Œå†ä½¿ç”¨!dumpobjectå‘½ä»¤å°±å¯ä»¥äº†ã€‚
!dumpheap -typeå¯ä»¥æ ¹æ®å­—ç¬¦ä¸²æ¥åŒ¹é…å¯¹åº”çš„å¯¹è±¡ç±»å‹ã€‚å¦‚æˆ‘ä»¬è¾“å…¥å‘½ä»¤â€œ!dumpheap -type System.Webâ€ï¼Œæ˜¯æŒ‡æ˜¾ç¤ºæ‰€æœ‰ç±»ååŒ…å«æœ‰â€œSystem.Webâ€å­—ç¬¦ä¸²çš„å¯¹è±¡ä¿¡æ¯ã€‚
å…¶ä»–å‚æ•°-minå’Œ-maxæ˜¯æ¥å—è¡¨ç¤ºå¯¹è±¡å¤§å°çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼ˆå•ä½å­—èŠ‚ï¼‰ï¼Œå‘½ä»¤ä¼šåªåˆ—å‡ºå¤§äºæŒ‡å®šå€¼æˆ–å°äºæŒ‡å®šå€¼çš„å¯¹è±¡ä¿¡æ¯ã€‚è¿™ä¸¤ä¸ªå‚æ•°å¯¹äºæŸ¥æ‰¾æ»¥ç”¨å­—ç¬¦ä¸²é—®é¢˜å¾ˆæœ‰å¸®åŠ©ã€‚</p><p><strong>å®æˆ˜è®­ç»ƒ</strong>
<strong>æŸ¥æ˜ç¼“å­˜ä½¿ç”¨çš„å¤§å°</strong>
ä¸ºäº†çŸ¥é“åœ¨System.Web.Caching.Cacheç±»å‹ä¸­æœ‰å¤šå°‘æ•°æ®ï¼Œæˆ‘æ‰§è¡Œäº†â€œ !dumpheap -stat -type System.Web.Caching.Cacheâ€å‘½ä»¤ã€‚æ³¨æ„ï¼Œæˆ‘ç”¨äº†-statå‚æ•°ï¼Œå¦åˆ™æˆ‘ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«æœ‰System.Web.Caching.CacheKeyså’ŒSystem.Web.Caching.CacheEntryså¯¹è±¡çš„å¾ˆé•¿çš„åˆ—è¡¨ã€‚ä¸‹é¢çš„æ‰§è¡Œç»“æœï¼š</p><pre><code>0:050&gt; !dumpheap -type System.Web.Caching.Cache -stat
------------------------------
Heap 0
total 665 objects
------------------------------
Heap 1
total 1084 objects
------------------------------
total 1749 objects
Statistics:
      MT    Count    TotalSize Class Name
123056f8        1           12 System.Web.Caching.CacheKeyComparer
1230494c        1           12 System.Web.Caching.Cache
1230500c        1           24 System.Web.Caching.CacheMultiple
1230514c        1           32 System.Web.Caching.CacheMemoryStats
123053b4        1           36 System.Web.Caching.CacheMemoryTotalMemoryPressure
123059bc        2           40 System.Web.Caching.CacheUsage
12304bdc        1           48 System.Web.Caching.CacheCommon
123054f4        1           52 System.Web.Caching.CacheMemoryPrivateBytesPressure
12305874        2           64 System.Web.Caching.CacheExpires
12304e64        2          200 System.Web.Caching.CacheSingle
1255b594       85         1360 System.Web.Caching.CacheDependency+DepFileInfo
123046c4       40         1440 System.Web.Caching.CacheDependency
123042ec       47         1504 System.Web.Caching.CacheItemRemovedCallback
123063fc      832        16640 System.Web.Caching.CacheKey
12306820      732        52704 System.Web.Caching.CacheEntry
Total 1749 objects
</code></pre><p>å¾ˆæ˜æ˜¾System.Web.Caching.Cacheçš„æ–¹æ³•åˆ—è¡¨åœ°å€ï¼ˆMethodTableï¼‰æ˜¯1230494cï¼Œå†ä½¿ç”¨!dumpheapå‘½ä»¤æˆ‘å°±èƒ½çœ‹åˆ°å®ƒçš„æ‰€æœ‰å¯¹è±¡ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>0:050&gt; !dumpheap -mt 1230494c
------------------------------
Heap 0
Address       MT     Size
03392d20 1230494c       12
total 1 objects
------------------------------
Heap 1
Address       MT     Size
total 0 objects
------------------------------
total 1 objects
Statistics:
      MT    Count    TotalSize Class Name
1230494c        1           12 System.Web.Caching.Cache
Total 1 objects
</code></pre><p>å¯ä»¥çœ‹åˆ°System.Web.Caching.Cacheç±»å‹åªæœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œåœ°å€æ˜¯03392d20ï¼Œå†é€šè¿‡!objsizeå‘½ä»¤å°±èƒ½è®¡ç®—å‡ºå®ƒçš„å¤§å°ã€‚å› ä¸ºç¼“å­˜å¯¹è±¡å¾ˆå¤æ‚ï¼Œå¹¶åŒ…å«æœ‰å¤§é‡çš„å­å¯¹è±¡ï¼Œè¦è®¡ç®—å‡ºæ€»å¤§å°éœ€è¦èŠ±äº›æ—¶é—´ï¼š</p><pre><code>0:050&gt; !objsize 03392d20
sizeof(03392d20) =    266640828 (   0xfe49dbc) bytes (System.Web.Caching.Cache)
</code></pre><p>æ‰€ä»¥ç¼“å­˜çš„æ€»å¤§å°æ˜¯ 266 MBã€‚</p><p><strong>ç¼“å­˜äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</strong>
ä¸ºäº†å¼„æ¸…ç¼“å­˜ä¸­ä¿å­˜äº†ä»€ä¹ˆå†…å®¹ï¼Œæˆ‘æŸ¥çœ‹äº†System.Web.Caching.CacheEntryçš„å¯¹è±¡ä¿¡æ¯ã€‚é€šè¿‡ä¹‹å‰çš„ä¿¡æ¯å¯ä»¥çŸ¥é“System.Web.Caching.CacheEntryç±»å‹çš„æ–¹æ³•åˆ—è¡¨(MethodTable)æ˜¯12306820ã€‚æ‰§è¡Œ!dumpheapå‘½ä»¤å–CacheEntryçš„æ‰€æœ‰å¯¹è±¡ä¿¡æ¯ï¼š</p><pre><code>0:050&gt; !dumpheap -mt 12306820
------------------------------
Heap 0
Address       MT     Size
033950bc 12306820       72
033a20d8 12306820       72
033ac79c 12306820       72
033da21c 12306820       72
033f04c4 12306820       72
03428ec8 12306820       72
0344dab4 12306820       72
03815d00 12306820       72
038265d8 12306820       72
....etc...
03af7010 12306820       72
03b291bc 12306820       72
03b2c674 12306820       72
03b6dca0 12306820       72
03b797dc 12306820       72
03b85318 12306820       72
03ba9150 12306820       72
03c258cc 12306820       72
03de43c8 12306820       72
03e160f8 12306820       72
total 382 objects
------------------------------
total 732 objects
</code></pre><p>è¦æ˜¾ç¤ºä¸Šé¢çš„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨â€œ!dumpheap -type System.Web.Caching.CacheEntryâ€å‘½ä»¤ã€‚
æœ‰äº†æ‰€æœ‰CacheEntryå¯¹è±¡çš„åœ°å€ä¿¡æ¯ï¼Œæˆ‘éšæœºæ‹¿äº†ä¸€ä¸ªåœ°å€æŸ¥çœ‹å®ƒçš„å†…å®¹ï¼š</p><pre><code>0:050&gt; !do 03b2c674
Name: System.Web.Caching.CacheEntry
MethodTable: 12306820
EEClass: 122f6470
Size: 72(0x48) bytes
(C:\WINDOWS\assembly\GAC_32\System.Web\2.0.0.0__b03f5f7f11d50a3a\System.Web.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
02c39310  4001327        4        System.String  0 instance 03b2c600 _key
0fb8f1f8  4001328        c          System.Byte  0 instance        2 _bits
0fd3da00  4001329        8         System.Int32  0 instance -1314181915 _hashCode
02c36ca0  4001330       10        System.Object  0 instance 03b2c644 _value
120219d0  4001331       1c      System.DateTime  1 instance 03b2c690 _utcCreated
120219d0  4001332       24      System.DateTime  1 instance 03b2c698 _utcExpires
1202af88  4001333       2c      System.TimeSpan  1 instance 03b2c6a0 _slidingExpiration
0fb8f1f8  4001334        d          System.Byte  0 instance        7 _expiresBucket
123062d8  4001335       34 ...g.ExpiresEntryRef  1 instance 03b2c6a8 _expiresEntryRef
0fb8f1f8  4001336        e          System.Byte  0 instance 4294967295 _usageBucket
12306738  4001337       38 ...ing.UsageEntryRef  1 instance 03b2c6ac _usageEntryRef
120219d0  4001338       3c      System.DateTime  1 instance 03b2c6b0 _utcLastUpdate
123046c4  4001339       14 ...g.CacheDependency  0 instance 00000000 _dependency
02c36ca0  400133a       18        System.Object  0 instance 033d8344 _onRemovedTargets
120219d0  400132d      1bc      System.DateTime  1   shared   static NoAbsoluteExpiration
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:03395104 &lt; &lt;
1202af88  400132e      1c0      System.TimeSpan  1   shared   static NoSlidingExpiration
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:03395114 &lt; &lt;
1202af88  400132f      1c4      System.TimeSpan  1   shared   static OneYear
    &gt;&gt; Domain:Value  0019daf0:NotInit  11b42540:03395124 &lt; &lt;
</code></pre><p>è¾“å‡ºçš„æ˜¯CacheEntryçš„å±æ€§ä¿¡æ¯ï¼Œé‡Œé¢æœ€é‡è¦çš„æ˜¯_valueå±æ€§ã€‚æˆ‘å¤åˆ¶å®ƒçš„åœ°å€ï¼ˆ03b2c644ï¼‰ï¼Œå†ç”¨!dumpobjectå‘½ä»¤æŸ¥çœ‹ï¼š</p><pre><code>0:000&gt; !do 03e160c8
Name: System.Web.SessionState.InProcSessionState
MethodTable: 14dbad5c
EEClass: 14e43af8
Size: 48(0x30) bytes
(C:\WINDOWS\assembly\GAC_32\System.Web\2.0.0.0__b03f5f7f11d50a3a\System.Web.dll)
Fields:
      MT    Field   Offset                 Type VT     Attr    Value Name
1466c9d8  4001d89        4 ...ateItemCollection  0 instance 1a7f5438 _sessionItems
1292672c  4001d8a        8 ...ObjectsCollection  0 instance 00000000 _staticObjects
0fd3da00  4001d8b        c         System.Int32  0 instance       20 _timeout
120261c8  4001d8c       18       System.Boolean  0 instance        0 _locked
120219d0  4001d8d       1c      System.DateTime  1 instance 03e160e4 _utcLockDate
0fd3da00  4001d8e       10         System.Int32  0 instance        1 _lockCookie
1202bf60  4001d8f       24 ...ReadWriteSpinLock  1 instance 03e160ec _spinLock
0fd3da00  4001d90       14         System.Int32  0 instance        0 _flags
</code></pre><p>å¯ä»¥çœ‹åˆ°ç¼“å­˜çš„æ˜¯ä¸€ä¸ªInProcSessionStateå¯¹è±¡ã€‚</p><p><strong>å‚è€ƒæ–‡ç« ï¼š</strong>
<a class=link href=http://blogs.msdn.com/b/johan/archive/2007/11/26/getting-started-with-windbg-part-ii.aspx target=_blank rel=noopener>Getting started with windbg - part I</a></p><p><a class=link href=http://blogs.msdn.com/b/johan/archive/2007/11/26/getting-started-with-windbg-part-ii.aspx target=_blank rel=noopener>Getting started with windbg - part II</a></p></section><footer class=article-footer><section class=article-tags><a href=//blog.xetri.net/tags/windbg>Win dbg</a></section></footer></article><aside class="widget related-contents--wrapper"><h1 class=widget-title>ç›¸å…³æ–‡ç« </h1><div class=related-contents><div class="flex article-list--tile"><article><a href=//blog.xetri.net/2012/02/intro-to-windbg-for-dotnet-developers/><div class=article-details><h2 class=article-title>é¢å‘.NETå¼€å‘äººå‘˜çš„WinDbgå…¥é—¨æ•™ç¨‹</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy; 2020 cxfksword's notes</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank>Stack</a></b> designed by
<a href=https://jimmycai.com target=_blank>Jimmy</a></section></footer></main></div></div><div class=pswp tabindex=-1 role=dialog aria-hidden=true style=display:none><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=//blog.xetri.net/ts/main.js defer></script><script>(function(){const customFont=document.createElement('link');customFont.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";customFont.type="text/css";customFont.rel="stylesheet";document.head.appendChild(customFont);}());</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-154973579-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-154973579-1');</script></body></html>