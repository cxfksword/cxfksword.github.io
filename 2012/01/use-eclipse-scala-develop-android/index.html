<!doctype html><html><head><meta charset=utf-8><title>利用Eclipse+Scala搭建android开发环境 &#183; cxfksword's notes</title><link rel=icon href=http://blog.tri-lib.com/favicon.ico type=image/x-icon><link rel=canonical href=http://blog.tri-lib.com/2012/01/use-eclipse-scala-develop-android/><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/dracula.min.css><link rel=stylesheet href=http://blog.tri-lib.com/css/styles.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class=navbar><ul><li><a href=http://blog.tri-lib.com/>HOME</a></li><li><a href=http://blog.tri-lib.com/categories>CATEGORIES</a></li><li><a href=http://blog.tri-lib.com/tags>TAGS</a></li><li><a href=http://blog.tri-lib.com/about class=logo-title>ABOUT</a></li></ul></div><div class=container><div class=title><a href=http://blog.tri-lib.com/><img src=http://blog.tri-lib.com/images/logo.png width=260px height=48px></a></div><a href=http://blog.tri-lib.com/2012/01/use-eclipse-scala-develop-android/><div class=post-title><img src=http://blog.tri-lib.com/images/post-title-icon.png><div class=post-meta><time>21 Jan 2012, 07:06</time><h1>利用Eclipse+Scala搭建android开发环境</h1></div></div></a><div class=post-toc><span class=title>Table of contents</span><nav id=TableOfContents></nav></div><section class=post-content><p><strong>1、安装JAVA SDK</strong></p><p>到官网（<a href=http://www.oracle.com/technetwork/java/javase/downloads/index.html>http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> ）下载最新的javase sdk，推荐安装1.6版。安装完成后，在windows环境变量中添加[JAVA_HOME]，并把路径指向java sdk的安装根目录。</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-1.jpg alt></p><p><strong>2、安装Scala</strong></p><p>从scala官网（<a href=http://www.scala-lang.org/downloads>http://www.scala-lang.org/downloads</a> ）下载windows版的压缩包，推荐2.8.1 final版，直接解压到相应目录中，假设为c:\scala-2.8.1.final\，再添加下面两个环境变量：</p><ul><li><p>新增环境变量SCALA_HOME，并设为c:\scala-2.8.1.final</p></li><li><p>在已有环境变量Path中，追加值c:\scala-2.8.1.final\bin</p></li></ul><p>通过win->run-cmd打开命令行，输入scala，能输出版本信息证明已安装成功</p><p><strong>3、安装Eclipse</strong></p><p>到Eclipse官网（<a href=http://www.eclipse.org/downloads/>http://www.eclipse.org/downloads/</a>）下载，直接解压就能使用，推荐下载Eclipse Classic/Eclipse For Java。</p><p><strong>4、安装Android SDK</strong></p><p>到android开发社区(<a href=http://developer.android.com/sdk/index.html>http://developer.android.com/sdk/index.html</a>)下载安装。安装后进入<strong>开始 > 所有程序 > Android SDK > SDK Manager</strong>程序，软件会提示一些可安装的更新，大家可以根据需要选择安装，建议安装下面图中所示的：</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/QQ%E4%BA%94%E7%AC%94%E6%88%AA%E5%9B%BE%E6%9C%AA%E5%91%BD%E5%90%8D.png alt></p><p>之后是漫长的等待&mldr;</p><p><strong>装ADT Plugin for Eclipse</strong>
等待android sdk安装好后，打开Eclipse，进入菜单<strong>Help</strong> > <strong>Install New Software&mldr;</strong>.，点击**Add，**添加链接</p><pre><code>https://dl-ssl.google.com/android/eclipse/
</code></pre><p>勾选所有项目，然后点击Next安装。</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-2.jpg alt></p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-3.jpg alt></p><p>安装完成并重启Eclipse后，进入菜单<strong>Window > Preferences > Android</strong>，点击<strong>Browser</strong>，把路径指向android sdk的安装目录，然后点击<strong>Apply</strong>。</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-6.jpg alt>
<strong>6、安装Scala IDE Plugin</strong>
打开<strong>Eclipse</strong>，进入菜单<strong>Help</strong> > <strong>Install New Software&mldr;</strong>.，点击**Add，**添加链接</p><pre><code>http://download.scala-ide.org/releases-28/2.0.0-beta
</code></pre><p>勾选安装下面两项：</p><p><strong>JDT weaving For scala</strong></p><p>**Scala IDE for Eclipse **
<img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-4.jpg alt></p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-5.jpg alt></p><p><strong>7、安装Treesaker **
打开</strong>Eclipse**，进入菜单**Help** > **Install New Software&mldr;**.，点击**Add，**添加链接</p><pre><code>http://treeshaker.googlecode.com/svn/trunk/update_site/
</code></pre><p>勾选treeshaker,点击Next安装。</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-7.jpg alt></p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-8.jpg alt></p><p>treeshaker是一个开源的辅助插件，详细可以访问项目地址：<a href=http://code.google.com/p/treeshaker/>http://code.google.com/p/treeshaker/</a></p><p><strong>8、简单的helloworld</strong></p><p>Eclipse中打开<strong>File > New > Project > Android Project</strong>创建一个新的android工程项目：</p><p><img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-9.jpg alt></p><p>按下面的步骤把java的项目转为scala的项目：</p><p>1、把src文件夹重命名为_src（右键src > Refactor > Rename)
2、右键HelloWorld项目 > Configure > Add Scala Nature
3、右键HelloWorld项目 > Add/Remove Treeshaker
4、打开菜单Project > Properties > Builders，确保builder的顺序和如下一样：</p><ul><li><p>Android Resource Manager</p></li><li><p>Android Pre Compiler</p></li><li><p>Scala Builder</p></li><li><p>Treeshaker</p></li><li><p>Android Package Builder</p></li></ul><p>5、打开res\layout\main.xml，把下面的内容替换中的内容：</p><pre><code>&lt;TextView
    android:layout_width=&quot;fill_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;@string/hello&quot;
    android:id=&quot;@+id/text&quot;
/&gt;
&lt;Button
    android:id=&quot;@+id/button&quot;
    android:layout_width=&quot;wrap_content&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:text=&quot;Click me&quot;
/&gt;
</code></pre><p>5、删除_src下的源文件HelloWorldActivity.java 6、创建新的scala代码文件，右键包com.test，选择New > Other > Scala Class <img src=http://images.cnblogs.com/cnblogs_com/vento/scala-android-10.jpg alt>Name设为HelloWorldActivty，Superclass设为android.app.Activity 7、修改HelloWorldActivity.scala文件： 增加导入：</p><pre><code>import android.os.Bundle
import android.view.View
import android.widget.TextView
import android.widget.Button
import R._
</code></pre><p>HelloWorldAcitvity类中增加代码：</p><pre><code>override def onCreate(savedInstanceState: Bundle) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.main)

        val textView = findViewById(R.id.text).asInstanceOf[TextView]
        val button = findViewById(R.id.button).asInstanceOf[Button]

        button.setOnClickListener((v: View) =&gt; textView.setText(&quot;Hello Scala&quot;))
}

implicit def func2OnClickListener(func : (View) =&gt; Unit) : View.OnClickListener = {
        return new View.OnClickListener() {
                override def onClick(v: View) = func(v)
        }
}
</code></pre><p>8、通过菜单Run > Run，应该能正常编译并在android模拟器中运行了</p><p>扩展阅读：</p><p><a href=http://code.google.com/p/treeshaker/wiki/CreateNewScalaProject>CreateNewScalaProject</a></p><p><a href=http://www.slideshare.net/papamitra/scalaandroid>ScalaでAndroidアプリ開発 </a></p><p><a href=http://www.nevercertain.com/2011/02/18/scala-android-intellij-win-part-3.html>Building Android Apps with Scala - IntelliJ </a></p><p><a href=http://lamp.epfl.ch/~michelou/android/>Exploring Android With Scala</a></p></section><div class=share><a href="http://www.facebook.com/sharer.php?src=bm&u=http%3a%2f%2fblog.tri-lib.com%2f2012%2f01%2fuse-eclipse-scala-develop-android%2f&t=%e5%88%a9%e7%94%a8Eclipse%2bScala%e6%90%ad%e5%bb%baandroid%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83" onclick="window.open(this.href,'PCwindow','width=550, height=350, menubar=no, toolbar=no, scrollbars=yes');return false;"><i class="fa fa-facebook"></i></a><a href="http://twitter.com/intent/tweet?url=http%3a%2f%2fblog.tri-lib.com%2f2012%2f01%2fuse-eclipse-scala-develop-android%2f&text=%e5%88%a9%e7%94%a8Eclipse%2bScala%e6%90%ad%e5%bb%baandroid%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83&tw_p=tweetbutton" onclick="window.open(this.href,'PCwindow','width=550, height=350, menubar=no, toolbar=no, scrollbars=yes');return false;"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/share?url=http%3a%2f%2fblog.tri-lib.com%2f2012%2f01%2fuse-eclipse-scala-develop-android%2f" onclick="window.open(this.href,'PCwindow','width=550, height=350, menubar=no, toolbar=no, scrollbars=yes');return false;"><i class="fa fa-google-plus"></i></a><a href="http://getpocket.com/edit?url=http%3a%2f%2fblog.tri-lib.com%2f2012%2f01%2fuse-eclipse-scala-develop-android%2f&title=%e5%88%a9%e7%94%a8Eclipse%2bScala%e6%90%ad%e5%bb%baandroid%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83" onclick="window.open(this.href,'PCwindow','width=550, height=350, menubar=no, toolbar=no, scrollbars=yes');return false;"><i class="fa fa-get-pocket"></i></a></div><div class=post-meta-code><div class=desc>public string description() {<div class=desc>val author = "
cxfksword
";</div><div class=desc>val categories = [
<a href=http://blog.tri-lib.com/categories/%E6%8A%80%E6%9C%AF>"技术"</a>
];</div>}</div><div class=desc>public string tags() {<div class=desc>val tags = [
<a href=http://blog.tri-lib.comtags/android>"android"</a>
<a href=http://blog.tri-lib.comtags/scala>"scala"</a>
];</div>}</div></div><div class=post-comment></div><div class="paging post-paging"><a class=left href=http://blog.tri-lib.com/2012/01/config-windows-services-install-name/ rel=prev><i class="fa fa-caret-left" aria-hidden=true></i><span>使windows服务安装名称可配置</span></a>
<a class=right href=http://blog.tri-lib.com/2012/01/zero-downtime-with-haproxy/ rel=next><span>利用HAProxy实现零停机更新维护</span> <i class="fa fa-caret-right" aria-hidden=true></i></a></div><footer class=footer>COPYRIGHT (C) <a href=https://blog.lulab.net>DONGGEUN,BANG</a>. ALL RIGHTS RESERVED.<p>Hosted by <a href=https://pages.coding.me style=font-weight:700>Coding Pages</a></p></footer></body></html>